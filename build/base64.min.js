!function(root){"use strict";var BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),BASE64_DECODE_CHAR={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63,"-":62,_:63},encodeAsBytes=function(str){for(var bytes=[],i=0;i<str.length;i++){var c=str.charCodeAt(i);128>c?bytes[bytes.length]=c:2048>c?(bytes[bytes.length]=192|c>>6,bytes[bytes.length]=128|63&c):55296>c||c>=57344?(bytes[bytes.length]=224|c>>12,bytes[bytes.length]=128|c>>6&63,bytes[bytes.length]=128|63&c):(c=65536+((1023&c)<<10|1023&str.charCodeAt(++i)),bytes[bytes.length]=240|c>>18,bytes[bytes.length]=128|c>>12&63,bytes[bytes.length]=128|c>>6&63,bytes[bytes.length]=128|63&c)}return bytes},decodeAsBytes=function(base64Str){var v1,v2,v3,v4,bytes=[],index=0,length=base64Str.length;"="==base64Str.charAt(length-2)?length-=2:"="==base64Str.charAt(length-1)&&(length-=1);for(var i=0,count=length>>2<<2;count>i;)v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v3=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v4=BASE64_DECODE_CHAR[base64Str.charAt(i++)],bytes[index++]=255&(v1<<2|v2>>>4),bytes[index++]=255&(v2<<4|v3>>>2),bytes[index++]=255&(v3<<6|v4);var remain=length-count;return 2==remain?(v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],bytes[index++]=255&(v1<<2|v2>>>4)):3==remain&&(v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v3=BASE64_DECODE_CHAR[base64Str.charAt(i++)],bytes[index++]=255&(v1<<2|v2>>>4),bytes[index++]=255&(v2<<4|v3>>>2)),bytes};"undefined"!=typeof module&&(root=global);var utf8Base64Encode,utf8Base64Decode,btoa=root.btoa,atob=root.atob;if(root.HI_BASE64_TEST||"undefined"==typeof module)btoa?(utf8Base64Encode=function(str){for(var result="",i=0;i<str.length;i++){var charcode=str.charCodeAt(i);128>charcode?result+=String.fromCharCode(charcode):2048>charcode?result+=String.fromCharCode(192|charcode>>6)+String.fromCharCode(128|63&charcode):55296>charcode||charcode>=57344?result+=String.fromCharCode(224|charcode>>12)+String.fromCharCode(128|charcode>>6&63)+String.fromCharCode(128|63&charcode):(charcode=65536+((1023&charcode)<<10|1023&str.charCodeAt(++i)),result+=String.fromCharCode(240|charcode>>18)+String.fromCharCode(128|charcode>>12&63)+String.fromCharCode(128|charcode>>6&63)+String.fromCharCode(128|63&charcode))}return btoa(result)},utf8Base64Decode=function(base64Str){var tmpStr=atob(base64Str.trim("=").replace(/-/g,"+").replace(/_/g,"/"));if(!/[^\x00-\x7F]/.test(tmpStr))return tmpStr;for(var b,c,str="",i=0,length=tmpStr.length,followingChars=0;length>i;)if(b=tmpStr.charCodeAt(i++),127>=b)str+=String.fromCharCode(b);else{if(b>191&&223>=b)c=31&b,followingChars=1;else if(239>=b)c=15&b,followingChars=2;else{if(!(247>=b))throw"not a UTF-8 string";c=7&b,followingChars=3}for(var j=0;followingChars>j;++j){if(b=tmpStr.charCodeAt(i++),128>b||b>191)throw"not a UTF-8 string";c<<=6,c+=63&b}if(c>=55296&&57343>=c)throw"not a UTF-8 string";if(c>1114111)throw"not a UTF-8 string";65535>=c?str+=String.fromCharCode(c):(c-=65536,str+=String.fromCharCode((c>>10)+55296),str+=String.fromCharCode((1023&c)+56320))}return str}):(btoa=function(str){for(var v1,v2,v3,base64Str="",length=str.length,i=0,count=3*parseInt(length/3);count>i;)v1=str.charCodeAt(i++),v2=str.charCodeAt(i++),v3=str.charCodeAt(i++),base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[63&(v1<<4|v2>>>4)]+BASE64_ENCODE_CHAR[63&(v2<<2|v3>>>6)]+BASE64_ENCODE_CHAR[63&v3];var remain=length-count;return 1==remain?(v1=str.charCodeAt(i),base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[v1<<4&63]+"=="):2==remain&&(v1=str.charCodeAt(i++),v2=str.charCodeAt(i),base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[63&(v1<<4|v2>>>4)]+BASE64_ENCODE_CHAR[v2<<2&63]+"="),base64Str},utf8Base64Encode=function(str){for(var v1,v2,v3,base64Str="",bytes=encodeAsBytes(str),length=bytes.length,i=0,count=3*parseInt(length/3);count>i;)v1=bytes[i++],v2=bytes[i++],v3=bytes[i++],base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[63&(v1<<4|v2>>>4)]+BASE64_ENCODE_CHAR[63&(v2<<2|v3>>>6)]+BASE64_ENCODE_CHAR[63&v3];var remain=length-count;return 1==remain?(v1=bytes[i],base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[v1<<4&63]+"=="):2==remain&&(v1=bytes[i++],v2=bytes[i],base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[63&(v1<<4|v2>>>4)]+BASE64_ENCODE_CHAR[v2<<2&63]+"="),base64Str},atob=function(base64Str){var v1,v2,v3,v4,str="",length=base64Str.length;"="==base64Str.charAt(length-2)?length-=2:"="==base64Str.charAt(length-1)&&(length-=1);for(var i=0,count=length>>2<<2;count>i;)v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v3=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v4=BASE64_DECODE_CHAR[base64Str.charAt(i++)],str+=String.fromCharCode(255&(v1<<2|v2>>>4))+String.fromCharCode(255&(v2<<4|v3>>>2))+String.fromCharCode(255&(v3<<6|v4));var remain=length-count;return 2==remain?(v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],str+=String.fromCharCode(255&(v1<<2|v2>>>4))):3==remain&&(v1=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v2=BASE64_DECODE_CHAR[base64Str.charAt(i++)],v3=BASE64_DECODE_CHAR[base64Str.charAt(i++)],str+=String.fromCharCode(255&(v1<<2|v2>>>4))+String.fromCharCode(255&(v2<<4|v3>>>2))),str},utf8Base64Decode=function(base64Str){for(var b,c,str="",bytes=decodeAsBytes(base64Str),length=bytes.length,i=0,followingChars=0;length>i;)if(b=bytes[i++],127>=b)str+=String.fromCharCode(b);else{if(b>191&&223>=b)c=31&b,followingChars=1;else if(239>=b)c=15&b,followingChars=2;else{if(!(247>=b))throw"not a UTF-8 string";c=7&b,followingChars=3}for(var j=0;followingChars>j;++j){if(b=bytes[i++],128>b||b>191)throw"not a UTF-8 string";c<<=6,c+=63&b}if(c>=55296&&57343>=c)throw"not a UTF-8 string";if(c>1114111)throw"not a UTF-8 string";65535>=c?str+=String.fromCharCode(c):(c-=65536,str+=String.fromCharCode((c>>10)+55296),str+=String.fromCharCode((1023&c)+56320))}return str});else{var Buffer=require("buffer").Buffer;btoa=function(str){return new Buffer(str,"ascii").toString("base64")},utf8Base64Encode=function(str){return new Buffer(str).toString("base64")},atob=function(base64Str){return new Buffer(base64Str,"base64").toString("ascii")},utf8Base64Decode=function(base64Str){return new Buffer(base64Str,"base64").toString()}}var encode=function(str,asciiOnly){return!asciiOnly&&/[^\x00-\x7F]/.test(str)?utf8Base64Encode(str):btoa(str)},decode=function(base64Str,asciiOnly){return asciiOnly?atob(base64Str):utf8Base64Decode(base64Str)},exports={encode:encode,decode:decode,encodeAsBytes:encodeAsBytes,decodeAsBytes:decodeAsBytes,atob:atob,btoa:btoa};"function"==typeof define&&define.amd?define(function(){return root.base64=exports}):"object"==typeof module&&module.exports?module.exports=exports:root.base64=exports}(this);